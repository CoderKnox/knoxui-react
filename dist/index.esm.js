import*as e from"react";import t,{useState as r,useMemo as n,createContext as a,useContext as o,useEffect as c}from"react";import{FileDown as l,X as s,ChevronDown as i,ArrowDownToLine as u,Printer as m}from"lucide-react";import"jspdf-autotable";import{utils as d,writeFile as p}from"xlsx";import f from"jspdf";var b=function(){return b=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},b.apply(this,arguments)};function g(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function h(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var v={xs:"px-2 py-0.5 text-xs",s:"px-3 py-1 text-sm",m:"px-4 py-1.5 text-base",l:"px-5 py-2 text-lg",xl:"px-6 py-2.5 text-xl"},y={primary:"bg-primary border-primary hover:bg-primary/50 text-white",secondary:"bg-secondary border-secondary hover:bg-secondary-600 text-white",success:"bg-success border-success hover:bg-success-600 text-white",warning:"bg-warning border-warning hover:bg-warning-600 text-white",error:"bg-error border-error hover:bg-error-600 text-white",ghost:"bg-ghost border-ghost hover:bg-gray-100 text-gray-800 dark:text-gray-100 dark:hover:bg-gray-800/50"},x={ripple:"overflow-hidden relative",push:"transform active:scale-90 transition-transform",none:""},E=function(t){var r=t.children,n=t.size,a=void 0===n?"m":n,o=t.color,c=void 0===o?"primary":o,l=t.clickEffect,s=void 0===l?"ripple":l,i=t.isLoading,u=void 0!==i&&i,m=t.className,d=void 0===m?"":m,p=t.disabled,f=void 0!==p&&p,h=t.onClick,E=g(t,["children","size","color","clickEffect","isLoading","className","disabled","onClick"]),w="font-semibold rounded-md transition-colors duration-400 h-min select-none border duration-200 transition-all hover:shadow-lg focus:shadow-lg ".concat(f&&"opacity-90 cursor-not-allowed"," ").concat(d),N=v[a]||v.m,k=y[c]||y.primary,C=x[s]||x.ripple;u&&(w="".concat(w," opacity-90 cursor-progress"));return e.createElement("button",b({className:"".concat(w," ").concat(N," ").concat(k," ").concat(C," ").concat(d),onClick:function(e){if("ripple"===s&&!u){var t=e.currentTarget,r=t.querySelector(".new-ripple");if(r){var n=t.getBoundingClientRect(),a=e.clientX-n.left,o=e.clientY-n.top,c=Math.max(n.width,n.height);r.style.left="".concat(a-c/4,"px"),r.style.top="".concat(o-c/4,"px"),r.style.width="".concat(c/2,"px"),r.style.height="".concat(c/2,"px"),r.classList.remove("hidden"),r.classList.add("animate-ripple"),setTimeout((function(){r.classList.remove("animate-ripple"),r.classList.add("hidden")}),600)}}h&&h(e)},disabled:f||u},E),"ripple"===s&&e.createElement("span",{className:"animate-ripple new-ripple absolute bg-white opacity-25 rounded-full hidden"}),u?e.createElement("span",{className:"flex items-center justify-center"},e.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Loading..."):r)},w={primary:"border-primary outline-primary accent-primary",secondary:"border-secondary outline-secondary accent-secondary",success:"border-success outline-success accent-success",warning:"border-warning outline-warning accent-warning",error:"border-error outline-error accent-error",ghost:"border-ghost focus:border-base-300 outline-none"},N=function(t){var r=t.checked,n=t.size,a=void 0===n?"m":n,o=t.color,c=void 0===o?"primary":o,l=t.label,s=t.onChange,i=t.className,u=void 0===i?"":i,m=t.wrapperClass,d=void 0===m?"":m,p=t.sx,f=g(t,["checked","size","color","label","onChange","className","wrapperClass","sx"]),h={xs:l?"p-0.5 text-xs":"h-3 w-3",s:l?"p-1 text-sm":"h-4 w-4",m:l?"p-1.5 text-base":"h-5 w-5",l:l?"p-2 text-lg":"h-6 w-6",xl:l?"p-3 text-xl":"h-7 w-7"};return e.createElement(e.Fragment,null,l?e.createElement("div",{className:d,style:p},e.createElement("label",{className:"".concat("w-full border rounded-md transition-all duration-200 focus:shadow-lg bg-base-200 border-base-300 flex"," ").concat(h[a])},e.createElement("input",b({type:"checkbox",checked:r,className:"".concat(w[c]," ").concat(u),onChange:s},f)),e.createElement("span",{className:"ml-2"},l))):e.createElement("input",b({type:"checkbox",className:"".concat(w[c]," ").concat(u," ").concat(h[a]),checked:r,onChange:s,style:p},f)))},k={xs:"p-0.5 text-xs",s:"p-1 text-sm",m:"p-1.5 text-base",l:"p-2 text-lg",xl:"p-3 text-xl"},C={primary:"border-primary outline-primary",secondary:"border-secondary outline-secondary",success:"border-success outline-success",warning:"border-warning outline-warning",error:"border-error outline-error",ghost:"border-ghost focus:border-base-300 outline-none"},S=function(t){var r=t.label,n=t.size,a=void 0===n?"m":n,o=t.color,c=t.type,l=void 0===c?"text":c,s=t.required,i=t.className,u=void 0===i?"":i,m=t.wrapperClass,d=void 0===m?"":m,p=t.labelClass,f=void 0===p?"":p,h=t.labelTextClass,v=void 0===h?"":h,y=t.sx,x=t.onChange,E=g(t,["label","size","color","type","required","className","wrapperClass","labelClass","labelTextClass","sx","onChange"]);return e.createElement("div",{className:d,style:y},e.createElement("label",{className:"flex flex-col items-start ".concat(f)},r&&e.createElement("span",{className:"text-sm px-0.5 ".concat(v)},r," ",s&&e.createElement("span",{className:"text-error"},"*")),e.createElement("input",b({type:l,className:"".concat("w-full border rounded-md transition-all duration-200 focus:shadow-lg bg-base-200 border-base-300"," ").concat(k[a]," ").concat(o?C[o]:""," ").concat(u),required:s,onChange:x},E))))},D={xs:"p-0.5 text-xs",s:"p-1 text-sm",m:"p-1.5 text-base",l:"p-2 text-lg",xl:"p-3 text-xl"},_={primary:"border-primary outline-primary accent-primary",secondary:"border-secondary outline-secondary accent-secondary",success:"border-success outline-success accent-success",warning:"border-warning outline-warning accent-warning",error:"border-error outline-error accent-error",ghost:"border-ghost focus:border-base-300 outline-none"},O={primary:"bg-primary",secondary:"bg-secondary",success:"bg-success",warning:"bg-warning",error:"bg-error",ghost:"bg-base-300"},j="w-full border rounded-md transition-all duration-200 focus:shadow-lg bg-base-200 border-base-300 flex items-center",z=function(t){var r=t.checked,n=t.size,a=void 0===n?"m":n,o=t.color,c=void 0===o?"primary":o,l=t.label,s=t.onChange,i=t.className,u=void 0===i?"":i,m=t.wrapperClass,d=void 0===m?"":m,p=t.sx,f=t.isButton,h=void 0!==f&&f,v=g(t,["checked","size","color","label","onChange","className","wrapperClass","sx","isButton"]);return h?e.createElement("label",{className:"".concat(j," ").concat(D[a]," ").concat(_[c]," ").concat(r?O[c]:""," ").concat(u," cursor-pointer"),style:p},e.createElement("input",b({type:"radio",checked:r,onChange:s,className:"sr-only"},v)),e.createElement("span",{className:"w-full text-center ".concat(r?"text-white":"")},l)):e.createElement(e.Fragment,null,l?e.createElement("div",{className:d,style:p},e.createElement("label",{className:"".concat(j," ").concat(D[a]," ").concat(r?O[c]:"")},e.createElement("input",b({type:"radio",checked:r,className:"".concat(_[c]," ").concat(u),onChange:s},v)),e.createElement("span",{className:"ml-2 ".concat(r?"text-white":"")},l))):e.createElement("input",b({type:"radio",className:"".concat(_[c]," ").concat(u," ").concat(r?O[c]:""),checked:r,onChange:s,style:p},v)))},T=function(t){var r,n,a,o,c,s,i=t.initialData,u=function(e,t){return h([],e,!0).sort((function(e,r){for(var n=0,a=t;n<a.length;n++){var o=a[n];if(e[o]<r[o])return-1;if(e[o]>r[o])return 1}return 0}))},m=e.useState(i)[0],d=e.useState([]),p=d[0],f=d[1],b=e.useState([]),g=b[0],v=b[1],y=e.useState([]),x=y[0],w=y[1],N=e.useState("sum"),k=N[0],C=N[1],D=e.useState(null),_=D[0],O=D[1],j=e.useState(!1),T=j[0],L=j[1],P=e.useMemo((function(){var e=h(h(h([],p,!0),g,!0),x,!0);return["buyer","style","orderNumber","color","orderQty","pricePerPcs"].filter((function(t){return!e.includes(t)}))}),[p,g,x]),F=function(e,t){e.dataTransfer.setData("field",t)},q=function(e,t){O(t),e.dataTransfer.setData("valueField",t)},A=function(e,t){_&&_!==t&&e.preventDefault()},M=function(e,t){e.preventDefault();var r=_;if(r&&r!==t){var n=h([],p,!0),a=n.indexOf(r),o=n.indexOf(t);n.splice(a,1),n.splice(o,0,r),f(n)}O(null)},U=function(e,t){e.preventDefault();var r=e.dataTransfer.getData("field");switch(f(p.filter((function(e){return e!==r}))),v(g.filter((function(e){return e!==r}))),w(x.filter((function(e){return e!==r}))),t){case"values":p.includes(r)||f(h(h([],p,!0),[r],!1));break;case"rows":g.includes(r)||v(h(h([],g,!0),[r],!1));break;case"columns":x.includes(r)||w(h(h([],x,!0),[r],!1))}},B=function(e){e.preventDefault()},I=function(e,t){switch(t){case"values":f(p.filter((function(t){return t!==e})));break;case"rows":v(g.filter((function(t){return t!==e})));break;case"columns":w(x.filter((function(t){return t!==e})))}},R=function(e,t,r){if(!e)return 0;var n=r?e.filter((function(e){return x.every((function(t){return e[t]===r}))})):e;return"sum"===k?n.reduce((function(e,r){return e+(r[t]||0)}),0):n.length};return e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"bg-base-100 rounded"},e.createElement("div",{className:"flex space-x-2 w-full overflow-auto"},e.createElement("div",{className:"border rounded bg-base-200 w-full"},e.createElement("h3",{className:"font-semibold p-1 text-center w-full bg-base-300 border-b"},"Values"),e.createElement("div",{className:"h-48 overflow-y-auto p-2",onDrop:function(e){return U(e,"values")},onDragOver:B},e.createElement("div",{className:"flex w-full pb-2 space-x-2"},e.createElement(z,{checked:"sum"===k,onChange:function(){return C("sum")},label:"SUM",isButton:!0,size:"s"}),e.createElement(z,{checked:"count"===k,onChange:function(){return C("count")},label:"COUNT",isButton:!0,size:"s"})),e.createElement("div",null,p.map((function(t){return e.createElement("div",{key:t,draggable:!0,className:"bg-base-100 border p-2 mb-1 rounded flex justify-between items-center cursor-move hover:shadow-lg duration-200",onDragStart:function(e){return F(e,t)}},e.createElement("span",null,t),e.createElement("button",{onClick:function(){return I(t,"values")},className:"text-error hover:text-warning"},"×"))}))))),e.createElement("div",{className:"border rounded bg-base-200 w-full"},e.createElement("h3",{className:"font-semibold p-1 text-center w-full bg-base-300 border-b"},"Rows"),e.createElement("div",{className:"overflow-y-auto h-48 p-2",onDrop:function(e){return U(e,"rows")},onDragOver:B},g.map((function(t){return e.createElement("div",{key:t,className:"bg-base-100 border p-2 mb-1 rounded flex justify-between items-center cursor-move hover:shadow-lg duration-200",draggable:!0,onDragStart:function(e){return F(e,t)}},e.createElement("span",null,t),e.createElement("button",{onClick:function(){return I(t,"rows")},className:"text-error hover:text-warning"},"×"))})))),e.createElement("div",{className:"border rounded bg-base-200 w-full"},e.createElement("h3",{className:"font-semibold p-1 text-center w-full bg-base-300 border-b"},"Columns"),e.createElement("div",{className:"overflow-y-auto h-48 p-2",onDrop:function(e){return U(e,"columns")},onDragOver:B},x.map((function(t){return e.createElement("div",{key:t,className:"bg-base-100 shadow cursor-move p-2 mb-1 rounded flex justify-between items-center hover:shadow-lg duration-200",draggable:!0,onDragStart:function(e){return F(e,t)}},e.createElement("span",null,t),e.createElement("button",{onClick:function(){return I(t,"columns")},className:"text-error hover:text-warning"},"×"))})))),e.createElement("div",{className:"border rounded bg-base-200 w-full"},e.createElement("h3",{className:"font-semibold p-1 text-center w-full bg-base-300 border-b"},"Available Fields"),e.createElement("div",{className:"overflow-y-auto h-48 p-2"},P.map((function(t){return e.createElement("div",{key:t,draggable:!0,onDragStart:function(e){return F(e,t)},className:"bg-base-100 shadow p-2 mb-1 rounded cursor-move hover:bg-primary duration-500 transition-colors"},t)})))))),e.createElement("div",{className:"border rounded bg-base-200"},e.createElement("div",{className:"p-2 flex justify-between items-center"},e.createElement("h2",{className:"font-semibold text-lg"},"Pivot Table Title"),e.createElement("div",{className:"flex join space-x- *:!rounded-none"},e.createElement(S,{color:"secondary",placeholder:"Global Search",title:"Real time search in table",className:"rounded-none"}),e.createElement(E,{title:"Export to excel",color:"success",className:"py-2.5"},e.createElement(l,{size:16})),e.createElement(E,{title:"Export to PDF",color:"error",className:"py-2.5"},e.createElement(l,{size:16})))),p.length>0&&g.length>0&&e.createElement("div",{className:"p-2"},e.createElement("div",{className:"flex justify-between mb-4"},e.createElement("input",{type:"text",placeholder:"Search in table...",className:"px-4 py-2 border rounded text-white"}),e.createElement("div",{className:"space-x-2"},e.createElement("button",{className:"px-4 py-2 bg-purple-600 rounded hover:bg-purple-700"},"Export To PDF"),e.createElement("button",{className:"px-4 py-2 bg-purple-600 rounded hover:bg-purple-700"},"Export To Excel"))),(n=u(m,g).reduce((function(e,t){var r=g.map((function(e){return t[e]})).join("-");return e[r]||(e[r]=[]),e[r].push(t),e}),{}),a=Array.from(new Set(m.map((function(e){return g.map((function(t){return e[t]})).join("-")})))),o=u(a.map((function(e){var t=e.split("-");return g.reduce((function(e,r,n){return e[r]=t[n],e}),{})})),g).map((function(e){return g.map((function(t){return e[t]})).join("-")})),c=x.length>0?(r=x[0],Array.from(new Set(m.map((function(e){return e[r]}))))):[],s=o.reduce((function(e,t){var r=t.split("-").slice(0,-1).join("-");return e[r]||(e[r]=[]),e[r].push(t),e}),{}),e.createElement("div",{className:"overflow-x-auto"},e.createElement("div",{className:"mb-4 flex items-center gap-2"},e.createElement("label",{className:"flex items-center gap-2 text-sm"},e.createElement("input",{type:"checkbox",checked:T,onChange:function(e){return L(e.target.checked)},className:"rounded bg-base-300"}),"Swap values and columns in header")),e.createElement("table",{className:"min-w-full bg-base-300 [&>*_th]:border [&>*_td]:border [&>*_td]:p-1"},e.createElement("thead",{className:"[&>*>th]:bg-base-200"},e.createElement("tr",null,g.map((function(t){return e.createElement("th",{key:t,rowSpan:x.length>0?2:1},t)})),x.length>0&&!T&&p.map((function(t){return e.createElement("th",{key:t,colSpan:c.length,draggable:!0,onDragStart:function(e){return q(e,t)},onDragOver:function(e){return A(e,t)},onDrop:function(e){return M(e,t)},className:"cursor-move hover:bg-base-300"},t)})),x.length>0&&T&&c.map((function(t){return e.createElement("th",{key:t,colSpan:p.length},t)})),0===x.length&&p.map((function(t){return e.createElement("th",{key:t,rowSpan:2,draggable:!0,onDragStart:function(e){return q(e,t)},onDragOver:function(e){return A(e,t)},onDrop:function(e){return M(e,t)},className:"cursor-move hover:bg-gray-700"},t)}))),x.length>0&&e.createElement("tr",null,T?c.map((function(t){return p.map((function(r){return e.createElement("th",{key:"".concat(t,"-").concat(r),draggable:!0,onDragStart:function(e){return q(e,r)},onDragOver:function(e){return A(e,r)},onDrop:function(e){return M(e,r)},className:"cursor-move hover:bg-gray-700"},r)}))})):p.map((function(t){return c.map((function(r){return e.createElement("th",{key:"".concat(t,"-").concat(r)},r)}))})))),e.createElement("tbody",null,Object.entries(s).map((function(t){var r=t[0],a=t[1];return e.createElement(e.Fragment,{key:r},a.map((function(t,r){var o=n[t],l=t.split("-");return e.createElement("tr",{key:t},l.map((function(t,n){if(!function(e,t,r){if(0===e)return!0;for(var n=r[e].split("-"),a=r[e-1].split("-"),o=0;o<=t;o++)if(n[o]!==a[o])return!0;return!1}(r,n,a))return null;var o=function(e,t,r){for(var n=r[e].split("-"),a=1,o=e+1;o<r.length;o++){for(var c=r[o].split("-"),l=!0,s=0;s<=t;s++)if(c[s]!==n[s]){l=!1;break}if(!l)break;a++}return a}(r,n,a);return e.createElement("td",{key:n,rowSpan:o},t)})),x.length>0?T?c.map((function(t){return p.map((function(r){return e.createElement("td",{key:"".concat(t,"-").concat(r)},R(o,r,t))}))})):p.map((function(t){return c.map((function(r){return e.createElement("td",{key:"".concat(t,"-").concat(r)},R(o,t,r))}))})):p.map((function(t){return e.createElement("td",{key:t},R(o,t))})))})),e.createElement("tr",{className:"bg-gray-700 font-bold"},g.map((function(t,r){return r===g.length-1&&e.createElement("td",{key:r,colSpan:g.length},"Sum")})),x.length>0?T?c.map((function(t){return p.map((function(r){return e.createElement("td",{key:"".concat(t,"-").concat(r)},a.reduce((function(e,a){return e+R(n[a],r,t)}),0))}))})):p.map((function(t){return c.map((function(r){return e.createElement("td",{key:"".concat(t,"-").concat(r)},a.reduce((function(e,a){return e+R(n[a],t,r)}),0))}))})):p.map((function(t){return e.createElement("td",{key:t},a.reduce((function(e,r){return e+R(n[r],t)}),0))}))))})))))))))},L={xs:"text-xs",s:"text-sm",m:"text-base",l:"text-lg",xl:"text-xl"},P={primary:"border-primary focus:border-primary",secondary:"border-secondary focus:border-secondary",success:"border-success focus:border-success",warning:"border-warning focus:border-warning",error:"border-error focus:border-error",ghost:"border-ghost focus:border-base-300"},F=function(t){var r=t.options,n=void 0===r?[]:r,a=t.placeholder,o=void 0===a?"Select an option":a,c=t.multiple,l=void 0!==c&&c,u=t.onChange,m=t.label,d=t.size,p=void 0===d?"m":d,f=t.color,b=t.required,g=t.className,v=void 0===g?"":g,y=t.wrapperClass,x=void 0===y?"":y,E=t.labelClass,w=void 0===E?"":E,N=t.labelTextClass,k=void 0===N?"":N,C=t.sx,S=t.renderOption,D=t.hideSearch,_=void 0!==D&&D,O=e.useState(!1),j=O[0],z=O[1],T=e.useState([]),F=T[0],q=T[1],A=e.useState(""),M=A[0],U=A[1],B=e.useState(-1),I=B[0],R=B[1],V=e.useRef(null),G=e.useMemo((function(){return n.filter((function(e){return e.label.toLowerCase().includes(M.toLowerCase())}))}),[n,M]),H=function(e){if(l){var t=F.includes(e)?F.filter((function(t){return t!==e})):h(h([],F,!0),[e],!1);q(t),u&&u(t)}else q([e]),z(!1),u&&u(e)};e.useEffect((function(){var e=function(e){V.current&&!V.current.contains(e.target)&&z(!1)};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[]);return e.useEffect((function(){j&&R(-1)}),[j]),e.createElement("div",{className:x,style:C},e.createElement("label",{className:"flex flex-col items-start ".concat(w)},m&&e.createElement("span",{className:"text-sm ".concat(k)},m," ",b&&e.createElement("span",{className:"text-error"},"*")),e.createElement("div",{className:"relative w-full ".concat("w-full border rounded-md transition-all duration-200 focus:shadow-lg bg-base-200 border-base-300"," ").concat(L[p]," ").concat(f?P[f]:""," ").concat(v),ref:V,onKeyDown:function(e){j&&("ArrowDown"===e.key?R((function(e){return Math.min(e+1,G.length-1)})):"ArrowUp"===e.key?R((function(e){return Math.max(e-1,0)})):"Enter"===e.key&&I>=0?H(G[I]):"Escape"===e.key&&z(!1))},tabIndex:0},e.createElement("div",{className:"flex items-center justify-between w-full p-2 cursor-pointer",onClick:function(){return z(!j)}},e.createElement("div",{className:"flex flex-wrap gap-1"},F.length>0?l?F.map((function(t){return e.createElement("span",{key:t.value,className:"px-2 py-1 text-sm bg-gray-200 rounded-md flex items-center"},t.label,e.createElement(s,{size:14,className:"ml-1 cursor-pointer",onClick:function(e){e.stopPropagation(),function(e){var t=F.filter((function(t){return t!==e}));q(t),u&&u(t)}(t)}}))})):e.createElement("span",null,F[0].label):e.createElement("span",{className:"text-gray-400"},o)),e.createElement(i,{size:20})),j&&e.createElement("div",{className:"absolute z-10 w-full mt-1 bg-base-100 border rounded-md shadow-lg"},!_&&e.createElement("div",{className:"p-1"},e.createElement("input",{type:"text",className:"w-full p-2 border-b bg-base-200",placeholder:"Search...",value:M,onChange:function(e){return U(e.target.value)}})),e.createElement("ul",{className:"max-h-60 overflow-auto"},G.map((function(t,r){return e.createElement("li",{key:t.value,className:"p-2 cursor-pointer hover:bg-base-200 ".concat(F.includes(t)?"bg-base-300":""," ").concat(I===r?"bg-base-300":""),onClick:function(){return H(t)}},S?S(t):t.label)})))))))};function q(e,t){void 0===t&&(t=null);var a=r(t),o=a[0],c=a[1];return{items:n((function(){var t=h([],e,!0);return null!==o&&t.sort((function(e,t){return e[o.key]<t[o.key]?"asc"===o.direction?-1:1:e[o.key]>t[o.key]?"asc"===o.direction?1:-1:0})),t}),[e,o]),requestSort:function(e){var t="asc";o&&o.key===e&&"asc"===o.direction&&(t="desc"),c({key:e,direction:t})},sortConfig:o}}function A(e,t){var a=r({}),o=a[0],c=a[1];return{filteredItems:n((function(){return e.filter((function(e){return(!o.global||Object.values(e).some((function(e){return String(e).toLowerCase().includes(o.global.toLowerCase())})))&&t.every((function(t){var r=o[t];return!r||String(e[t]).toLowerCase().includes(r.toLowerCase())}))}))}),[e,t,o]),setFilter:function(e,t){c((function(r){var n;return b(b({},r),((n={})[e]=t,n))}))},filterValues:o}}function M(e){var t=r(e),n=t[0],a=t[1];return{columns:n,handleDragStart:function(e){return function(t){t.dataTransfer.setData("text/plain",e.toString())}},handleDragOver:function(e){e.preventDefault()},handleDrop:function(e){return function(t){t.preventDefault();var r=parseInt(t.dataTransfer.getData("text/plain"),10);if(r!==e){var o=h([],n,!0),c=o.splice(r,1)[0];o.splice(e,0,c),a(o)}}}}}var U=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},B=function(e,t){return void 0===t&&(t="USD"),new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)},I=function(e,t){return void 0===t&&(t=2),e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})},R=function(e,t,r){var n=d.json_to_sheet(e.map((function(e){return t.reduce((function(t,r){var n;return b(b({},t),((n={})[r.header]=e[r.key],n))}),{})}))),a=d.book_new();d.book_append_sheet(a,n,"Sheet1"),p(a,"".concat(r,".xlsx"))},V=function(e,t,r){var n=new f,a=e.map((function(e){return t.map((function(t){return e[t.key]}))})),o=t.map((function(e){return e.header}));n.autoTable({head:[o],body:a}),n.save("".concat(r,".pdf"))},G=function(e,t){return e.reduce((function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e}),{})},H=function(e,t){return e.reduce((function(e,r){return e+r[t]}),0)},K=function(e,t){return Array.from(new Map(e.map((function(e){return[e[t],e]}))).values())},Q={xs:"text-xs [&>_tbody>*_td]:p-0.5 [&>_tbody>*_th]:p-0.5",s:"text-sm [&>_tbody>*_td]:p-1   [&>_tbody>*_th]:p-1 ",m:"text-base [&>_tbody>*_td]:p-1.5 [&>_tbody>*_th]:p-1.5",l:"text-lg [&>_tbody>*_td]:p-2   [&>_tbody>*_th]:p-2 ",xl:"text-xl [&>_tbody>*_td]:p-2.5 [&>_tbody>*_th]:p-2.5"},W=function(t){var r=t.tableConfig,n=void 0===r?{data:[],columns:[]}:r,a=t.isSerialized,o=void 0===a||a,c=t.size,l=void 0===c?"m":c,s=t.header,i=void 0===s||s,d=t.title,p=void 0===d?"":d;t.printSize;var f=t.sum,b=void 0!==f&&f,g=n.data,h=n.columns,v="border-collapse border w-full [&>*_th]:border [&>*_td]:border "+Q[l],y=q(g),x=y.items,E=y.requestSort,w=y.sortConfig,N=A(x,h.map((function(e){return e.key}))),k=N.filteredItems,C=N.setFilter;N.filterValues;var S=M(h),D=S.columns,_=S.handleDragStart,O=S.handleDragOver,j=S.handleDrop;return e.createElement("div",{className:"bg-base-100"},i&&e.createElement("div",{className:"table-header p-2 flex justify-between border border-b-0 bg-base-200 rounded-t"},e.createElement("div",{className:"font-semibold text-lg"},p&&e.createElement("div",{className:"title"},p)),e.createElement("div",{className:"controls space-x-2 flex"},e.createElement("input",{type:"search",placeholder:"Global search",className:"border rounded text-sm px-1.5 border-secondary outline-none focus:border-primary bg-base-100",onChange:function(e){return C("global",e.target.value)}}),e.createElement("button",{onClick:function(){R(k,D,p||"table-data")},title:"Export to Excel",className:"h-8 w-8 rounded bg-success flex justify-center items-center"},e.createElement(u,{size:16})),e.createElement("button",{onClick:function(){V(k,D,p||"table-data")},title:"Print or Save as PDF",className:"h-8 w-8 rounded bg-primary flex justify-center items-center"},e.createElement(m,{size:16})))),e.createElement("table",{className:v},e.createElement("thead",{className:"*:bg-base-200"},e.createElement("tr",{className:"*:p-0.5"},o&&e.createElement("th",null,"#"),D.map((function(t,r){return e.createElement("th",{key:t.key,draggable:!0,onDragStart:_(r),onDragOver:O,onDrop:j(r),className:"cursor-move",onClick:function(){return E(t.key)}},t.header,(null==w?void 0:w.key)===t.key&&e.createElement("span",null,"asc"===w.direction?" ↑":" ↓"))}))),e.createElement("tr",{className:"table-col-search"},o&&e.createElement("th",null),h.map((function(t){return e.createElement("th",{key:"search-".concat(t.key),className:"!p-0.5"},e.createElement("input",{type:"search",placeholder:"Search ".concat(t.header),className:"!px-1 p-0.5 w-full font-light bg-base-100",onChange:function(e){return C(t.key,e.target.value)}}))})))),e.createElement("tbody",null,k.map((function(t,r){return e.createElement("tr",{key:"row-".concat(r)},o&&e.createElement("td",null,r+1),D.map((function(n){var a=function(e,t){if(0===e)return!0;for(var r=D[t],n=k[e][r.key],a=k[e-1][r.key],o=0;o<t;o++){var c=D[o].key;if(k[e][c]!==k[e-1][c])return!0}return n!==a}(r,D.indexOf(n));if(!a)return null;var o,c,l=function(e,t){for(var r=D[t],n=k[e][r.key],a=1,o=!0,c=e+1;c<k.length;c++){for(var l=0;l<t;l++){var s=D[l].key;if(k[c][s]!==k[e][s]){o=!1;break}}if(!o||k[c][r.key]!==n)break;a++}return a}(r,D.indexOf(n)),s=t[n.key],i=s;return"date"===n.dataType?i=U(s):"currency"===n.dataType?i=B(s):"number"===n.dataType&&(i=I(s)),e.createElement("td",{key:"cell-".concat(r,"-").concat(n.key),rowSpan:l,className:(o=n.dataType,c="",["int","float","currency","number"].includes(o||"")?c="text-right":["date","datetime"].includes(o||"")&&(c="text-center"),c)},i)})))}))),b&&e.createElement("tfoot",null,e.createElement("tr",{className:"*:bg-base-200 text-right font-bold"},o&&e.createElement("td",null),D.map((function(t){return e.createElement("td",{key:t.key},t.sum&&H(k,t.key))}))))))},X={xs:"p-0.5 text-xs",s:"p-1 text-sm",m:"p-1.5 text-base",l:"p-2 text-lg",xl:"p-3 text-xl"},Y={primary:"border-primary outline-primary",secondary:"border-secondary outline-secondary",success:"border-success outline-success",warning:"border-warning outline-warning",error:"border-error outline-error",ghost:"border-ghost focus:border-base-300 outline-none"},J=function(e){var r=e.label,n=e.size,a=void 0===n?"m":n,o=e.color,c=e.required,l=e.className,s=void 0===l?"":l,i=e.wrapperClass,u=void 0===i?"":i,m=e.labelClass,d=void 0===m?"":m,p=e.labelTextClass,f=void 0===p?"":p,h=e.sx,v=e.rows,y=void 0===v?1:v,x=e.onChange,E=g(e,["label","size","color","required","className","wrapperClass","labelClass","labelTextClass","sx","rows","onChange"]);return t.createElement("div",{className:u,style:h},t.createElement("label",{className:"flex flex-col items-start ".concat(d)},t.createElement("span",{className:"text-sm ".concat(f)},r," ",c&&t.createElement("span",{className:"text-error"},"*")),t.createElement("textarea",b({className:"".concat("w-full border rounded-md transition-all duration-200 focus:shadow-lg bg-base-200 border-base-300"," ").concat(X[a]," ").concat(o?Y[o]:""," ").concat(s),required:c,rows:y,onChange:x},E))))},Z=a(void 0),$=function(){var e=o(Z);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},ee=function(e){var n=e.children,a=r("light"),o=a[0],l=a[1];return c((function(){document.documentElement.classList.toggle("dark","dark"===o)}),[o]),t.createElement(Z.Provider,{value:{theme:o,toggleTheme:function(){l("light"===o?"dark":"light")}}},n)};export{E as Button,N as Checkbox,S as Input,T as PivotTable,z as Radio,F as Select,W as Table,J as TextArea,ee as ThemeProvider,R as exportToExcel,V as exportToPDF,B as formatCurrency,U as formatDate,I as formatNumber,G as groupBy,H as sumBy,K as uniqueBy,M as useDraggableColumns,A as useFilterableData,q as useSortableData,$ as useTheme};
//# sourceMappingURL=index.esm.js.map
